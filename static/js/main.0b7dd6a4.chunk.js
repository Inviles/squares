(this.webpackJsonpsquares=this.webpackJsonpsquares||[]).push([[0],{21:function(e,t,r){e.exports={PlayingScreen__field:"PlayingScreen_PlayingScreen__field__1q0Ti"}},22:function(e,t,r){e.exports={Square:"Square_Square__387Ds",Square_state_empty:"Square_Square_state_empty__1XW5P",Square_player_first:"Square_Square_player_first__lQSu4",Square_player_second:"Square_Square_player_second__BoADq"}},31:function(e,t,r){},37:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(9),s=r.n(c),i=(r(31),r(41)),l=r(39),u=r(40),o=r(43),j=r(12),h=r.n(j),d=r(21),b=r.n(d),f=r(1),O=function(e){var t=e.player,r=e.makeMove,n=e.field,a=e.onFinishGame,c=e.statistics,s=h.a.bind(b.a),i=c[1],j=c[2];return Object(f.jsx)(l.a,{className:s("PlayingScreen","py-5"),children:Object(f.jsxs)(u.a,{className:"d-flex flex-column align-items-center",children:[Object(f.jsx)(l.a,{className:"mb-3",children:Object(f.jsx)(u.a,{children:Object(f.jsx)("h4",{children:"Current player: ".concat(t)})})}),Object(f.jsx)(l.a,{children:Object(f.jsx)(u.a,{xs:12,className:s("PlayingScreen__field"),children:n.map((function(e,t){return Object(f.jsx)(I,{row:e,rowIndex:t,onSelectSquare:r},t)}))})}),Object(f.jsx)(l.a,{children:Object(f.jsxs)(u.a,{children:[Object(f.jsxs)("p",{className:"mt-2 mb-0",children:[Object(f.jsx)("span",{className:"font-weight-bold",children:"First player: "}),i]}),Object(f.jsxs)("p",{className:"mb-0",children:[Object(f.jsx)("span",{className:"font-weight-bold",children:"Second player: "}),j]})]})}),Object(f.jsx)(o.a,{className:"mt-3",onClick:a,children:"Finish"})]})})},x=r(22),m=r.n(x),y=function(e){var t=e.player,r=e.rowIndex,a=e.columnIndex,c=e.onSelectSquare,s=h.a.bind(m.a),i=Object(n.useCallback)((function(){Boolean(t)||c(r,a)}),[t,r,a,c]),l=s("Square",{Square_player_first:1===t,Square_player_second:2===t,Square_state_empty:!t});return Object(f.jsx)("div",{className:l,onClick:i})},p=r(8),S=r(25),w=r(14),g=r(10),v=r(15),P=r(23),_=function(){function e(){var t=this;Object(v.a)(this,e),this.adjacencyList={},this.findLongestPath=function(){var e=t.adjacencyList,r=Object.keys(e),n={},a=0,c=0,s=function t(r){var a=e[r],s=a.length>0;n[r]=!0,c+=1,s&&a.forEach((function(e){n[e]||t(e)}))};return r.forEach((function(e){n[e]||s(Number(e)),c>a&&(a=c),c=0})),a}}return Object(P.a)(e,[{key:"addVertex",value:function(e){this.adjacencyList[e]||(this.adjacencyList[e]=[])}},{key:"addEdge",value:function(e,t){var r=this.adjacencyList;r[e].push(t),r[t].push(e)}}]),e}(),q="The game has not started yet",N={1:0,2:0},k=new function e(){var t=this;Object(v.a)(this,e),this.field=[],this.firstPlayerGraph=null,this.secondPlayerGraph=null,this.currentPlayerGraph=null,this.currentPlayer=null,this.remainingNumberOfMoves=0,this.statistics=N,this.start=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;t.firstPlayerGraph=new _,t.secondPlayerGraph=new _,t.currentPlayer=1,t.currentPlayerGraph=t.firstPlayerGraph,t.remainingNumberOfMoves=e*e,t.statistics=N;var r=function(){return new Array(e).fill(null)},n=r();return t.field=n.map((function(){return r()})),t.field},this.makeMove=function(e,r){var n;if(null===t.currentPlayer)throw new Error(q);if(0===t.remainingNumberOfMoves)throw new Error("There are not any moves left");t.selectSquare(e,r),t.updateCurrentGraph(e,r);var a=null===(n=t.currentPlayerGraph)||void 0===n?void 0:n.findLongestPath(),c=Object(g.a)(Object(g.a)({},t.statistics),{},Object(w.a)({},t.currentPlayer,a));return t.statistics=c,t.remainingNumberOfMoves-=1,t.switchPlayer(),t.field},this.finish=function(){if(null===t.firstPlayerGraph||null===t.secondPlayerGraph)throw new Error(q);var e=t.statistics[1],r=t.statistics[2];return e===r?null:e>r?1:2},this.selectSquare=function(e,r){var n=Object(S.a)(t.field);n[e][r]=t.currentPlayer,t.field=n},this.updateCurrentGraph=function(e,r){if(null===t.currentPlayerGraph)throw new Error(q);var n=t.getVertexIndex(e,r);t.currentPlayerGraph.addVertex(n),t.makeConnectionsBetweenSiblingSquares(e,r)},this.getVertexIndex=function(e,r){return r+e*t.field.length},this.makeConnectionsBetweenSiblingSquares=function(e,r){if(null===t.currentPlayerGraph)throw new Error(q);var n=t.getVertexIndex(e,r);t.getClosestSquaresInfo(e,r).forEach((function(e){var r,a=e.column,c=e.row;if((null===(r=t.field[c])||void 0===r?void 0:r[a])===t.currentPlayer){var s=a+c*t.field.length;t.currentPlayerGraph.addEdge(n,s)}}))},this.getClosestSquaresInfo=function(e,t){return[{row:e,column:t-1},{row:e-1,column:t},{row:e,column:t+1},{row:e+1,column:t}]},this.switchPlayer=function(){t.currentPlayer=1===t.currentPlayer?2:1,t.currentPlayerGraph=1===t.currentPlayer?t.firstPlayerGraph:t.secondPlayerGraph}},C={isShown:!1,winner:null},G=function(){var e=Object(n.useState)(!1),t=Object(p.a)(e,2),r=t[0],a=t[1],c=Object(n.useState)(),s=Object(p.a)(c,2),i=s[0],l=s[1],u=Object(n.useState)(k.currentPlayer),o=Object(p.a)(u,2),j=o[0],h=o[1],d=Object(n.useState)(k.statistics),b=Object(p.a)(d,2),x=b[0],m=b[1],y=Object(n.useState)(C),S=Object(p.a)(y,2),w=S[0],g=S[1],v=Object(n.useCallback)((function(e){return g({isShown:!0,winner:e})}),[]),P=Object(n.useCallback)((function(){return g(C)}),[]),_=Object(n.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=k.start(e);a(!0),h(k.currentPlayer),l(t),m(k.statistics)}),[]),q=Object(n.useCallback)((function(){var e=k.finish();v(e),a(!1),h(k.currentPlayer)}),[v]),N=Object(n.useCallback)((function(e,t){var r=k.makeMove(e,t),n=k.remainingNumberOfMoves;l(r),h(k.currentPlayer),m(k.statistics),0===n&&q()}),[q]);return r&&i?Object(f.jsx)(O,{player:j,field:i,makeMove:N,onFinishGame:q,statistics:x}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(M,{onStartGame:_}),Object(f.jsx)(H,{show:w.isShown,onHide:P,winner:w.winner})]})},I=function(e){var t=e.row,r=e.rowIndex,n=e.onSelectSquare;return Object(f.jsx)("div",{children:t.map((function(e,t){return Object(f.jsx)(y,{player:e,rowIndex:r,columnIndex:t,onSelectSquare:n},r+t)}))})},E=r(44),F=r.p+"static/media/squares_example.79acc20a.png",M=function(e){var t=e.onStartGame,r=Object(n.useState)(3),a=Object(p.a)(r,2),c=a[0],s=a[1],i=Object(n.useState)(""),j=Object(p.a)(i,2),h=j[0],d=j[1],b=Object(n.useCallback)((function(e){var t=Number(e.target.value),r=t>=2&&t<=8;s(Number(t)),r&&h?d(""):r||d("The field size must be ".concat(2," <= N <= ").concat(8))}),[h]),O=Object(n.useCallback)((function(){t(c)}),[t,c]);return Object(f.jsx)(l.a,{className:"py-5",children:Object(f.jsxs)(u.a,{children:[Object(f.jsx)(l.a,{className:"mb-3",children:Object(f.jsx)(u.a,{className:"text-center",children:Object(f.jsx)("h1",{children:"Squares"})})}),Object(f.jsx)(l.a,{className:"d-flex flex-column align-items-center",children:Object(f.jsxs)(u.a,{xs:8,children:[Object(f.jsx)(l.a,{children:Object(f.jsx)(u.a,{className:"d-flex flex-column align-items-center mb-3",children:Object(f.jsx)("img",{width:"500px",height:"486px",src:F,alt:"Squares example"})})}),Object(f.jsx)(l.a,{children:Object(f.jsx)(u.a,{children:Object(f.jsxs)("p",{children:["Squares is a simple two player game where a square shaped game board is split to N*N squares (2\xa0\u2264\xa0N\xa0\u2264\xa08).",Object(f.jsx)("br",{}),"Each player marks a square on their turn and at the end, the player with the biggest directly connecting squares group wins."]})})}),Object(f.jsxs)(l.a,{className:"d-flex justify-content-center",children:[Object(f.jsx)(u.a,{xs:12,children:"You can set the board size N*N squares (2\xa0\u2264\xa0N\xa0\u2264\xa08):"}),Object(f.jsxs)(u.a,{xs:4,className:"my-3",children:[Object(f.jsx)(E.a,{type:"number",value:c,onChange:b,min:2,max:8}),h&&Object(f.jsx)("small",{className:"text-danger mt-2 d-inline-block",children:h})]})]}),Object(f.jsx)(l.a,{children:Object(f.jsx)(u.a,{className:"d-flex justify-content-center",children:Object(f.jsx)(o.a,{onClick:O,disabled:Boolean(h),children:"Start game"})})})]})})]})})},B=r(26),L=r(42),T=["winner","show","onHide"],H=function(e){var t=e.winner,r=e.show,n=e.onHide,a=Object(B.a)(e,T);return Object(f.jsxs)(L.a,Object(g.a)(Object(g.a)({onHide:n,show:r},a),{},{children:[Object(f.jsx)(L.a.Header,{closeButton:!0,children:Object(f.jsx)(L.a.Title,{children:"Congratulations!"})}),r&&Object(f.jsx)(L.a.Body,{children:null===t?Object(f.jsx)("p",{children:"It look like we have a draw!"}):Object(f.jsx)("p",{children:"The winner is player ".concat(t,"!")})}),Object(f.jsx)(L.a.Footer,{children:Object(f.jsx)(o.a,{onClick:n,children:"Ok"})})]}))},V=function(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(i.a,{children:Object(f.jsx)(l.a,{children:Object(f.jsx)(u.a,{children:Object(f.jsx)(G,{})})})})})},A=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,45)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),n(e),a(e),c(e),s(e)}))};s.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(V,{})}),document.getElementById("root")),A()}},[[37,1,2]]]);
//# sourceMappingURL=main.0b7dd6a4.chunk.js.map